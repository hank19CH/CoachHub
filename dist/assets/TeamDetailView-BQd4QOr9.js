import{d as I,u as S,m as w,s as b,c as o,a as t,y as h,t as l,F as f,n as x,b as u,f as B,k as T,r as c,q as $,o as a,l as V}from"./index-DoIKaNgo.js";import{e as q,f as M}from"./groups-Bm0zxoQ-.js";const A={class:"pb-20"},L={class:"sticky top-0 bg-white/90 backdrop-blur-sm z-10 border-b border-gray-100"},N={class:"flex items-center justify-between p-4"},U={class:"font-display text-lg font-semibold text-gray-900 truncate"},W={key:0,class:"p-6"},z={class:"animate-pulse space-y-4"},F={class:"grid grid-cols-3 gap-3"},G={key:1,class:"p-4 space-y-6"},P={class:"card p-4"},R={class:"flex items-start gap-3"},E={class:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold text-lg flex-shrink-0"},O={key:0},H={key:1},J={class:"font-display text-xl font-bold text-gray-900"},K={key:0,class:"text-sm text-purple-600 font-medium"},Q={key:1,class:"text-sm text-gray-500"},X={key:2,class:"text-sm text-gray-600 mt-2"},Y={key:0,class:"card p-4"},Z=["src","alt"],tt={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-summit-600 to-summit-800 flex items-center justify-center text-white font-semibold text-sm"},et={class:"font-semibold text-gray-900 hover:underline"},st={class:"text-sm text-gray-500"},ot={class:"font-semibold text-gray-900 mb-3"},at={class:"text-gray-400 font-normal"},lt={class:"grid grid-cols-3 gap-3"},nt=["onClick"],rt=["src","alt"],it={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-summit-600 to-summit-800 flex items-center justify-center text-white font-semibold text-sm"},ut={class:"text-xs font-medium text-gray-900 text-center truncate w-full"},dt={key:1},ct={class:"space-y-2"},mt={class:"flex-1 min-w-0"},pt={class:"text-sm font-medium text-gray-900 truncate"},vt={class:"text-xs text-gray-500"},_t={class:"text-xs text-gray-400"},xt=I({__name:"TeamDetailView",setup(gt){const C=V(),m=T(),y=S(),n=c(null),p=c([]),v=c([]),_=c(!0),k=$(()=>C.params.id);w(async()=>{await j()});async function j(){_.value=!0;const[i,e]=await Promise.all([q(k.value),M(k.value)]);if(n.value=i,p.value=e,y.user){const{data:s}=await b.from("workout_assignments").select("*, workout:workouts(id, name, description, estimated_duration_min)").eq("athlete_id",y.user.id).eq("status","pending").gte("assigned_date",new Date().toISOString().split("T")[0]).order("assigned_date",{ascending:!0}).limit(5);v.value=(s||[]).map(d=>({...d,workout:Array.isArray(d.workout)?d.workout[0]??null:d.workout??null}))}_.value=!1}const r=c(null);w(async()=>{const i=setInterval(async()=>{if(n.value?.coach_id){clearInterval(i);const{data:e}=await b.from("profiles").select("id, username, display_name, avatar_url").eq("id",n.value.coach_id).single();r.value=e}},100);setTimeout(()=>clearInterval(i),5e3)});function g(i){return i?.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)??"?"}function D(i){return new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}return(i,e)=>(a(),o("div",A,[t("div",L,[t("div",N,[t("button",{onClick:e[0]||(e[0]=s=>h(m).back()),class:"text-gray-600 hover:text-gray-900 p-1"},[...e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])]),t("h1",U,l(n.value?.name||"Team"),1),e[3]||(e[3]=t("div",{class:"w-8"},null,-1))])]),_.value?(a(),o("div",W,[t("div",z,[e[4]||(e[4]=t("div",{class:"h-20 bg-gray-200 rounded-xl"},null,-1)),e[5]||(e[5]=t("div",{class:"h-6 w-32 bg-gray-200 rounded"},null,-1)),t("div",F,[(a(),o(f,null,x(6,s=>t("div",{key:s,class:"h-20 bg-gray-200 rounded-xl"})),64))])])])):n.value?(a(),o("div",G,[t("div",P,[t("div",R,[t("div",E,[n.value.sport?.icon?(a(),o("span",O,l(n.value.sport.icon),1)):(a(),o("span",H,l(g(n.value.name)),1))]),t("div",null,[t("h2",J,l(n.value.name),1),n.value.team?(a(),o("p",K,l(n.value.team.name),1)):u("",!0),n.value.sport?(a(),o("p",Q,l(n.value.sport.name),1)):u("",!0),n.value.description?(a(),o("p",X,l(n.value.description),1)):u("",!0)])])]),r.value?(a(),o("div",Y,[e[6]||(e[6]=t("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3"},"Coach",-1)),t("button",{onClick:e[1]||(e[1]=s=>h(m).push(`/profile/${r.value.username}`)),class:"flex items-center gap-3 w-full text-left"},[r.value.avatar_url?(a(),o("img",{key:0,src:r.value.avatar_url,alt:r.value.display_name,class:"w-12 h-12 rounded-full object-cover"},null,8,Z)):(a(),o("div",tt,l(g(r.value.display_name)),1)),t("div",null,[t("p",et,l(r.value.display_name),1),t("p",st,"@"+l(r.value.username),1)])])])):u("",!0),t("div",null,[t("h3",ot,[e[7]||(e[7]=B(" Teammates ",-1)),t("span",at,"("+l(p.value.length)+")",1)]),t("div",lt,[(a(!0),o(f,null,x(p.value,s=>(a(),o("button",{key:s.id,onClick:d=>h(m).push(`/profile/${s.athlete?.username}`),class:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-50 transition-colors"},[s.athlete?.avatar_url?(a(),o("img",{key:0,src:s.athlete.avatar_url,alt:s.athlete.display_name,class:"w-12 h-12 rounded-full object-cover"},null,8,rt)):(a(),o("div",it,l(g(s.athlete?.display_name||"?")),1)),t("p",ut,l(s.athlete?.display_name),1)],8,nt))),128))])]),v.value.length>0?(a(),o("div",dt,[e[9]||(e[9]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"Upcoming Workouts",-1)),t("div",ct,[(a(!0),o(f,null,x(v.value,s=>(a(),o("div",{key:s.id,class:"card p-3 flex items-center gap-3"},[e[8]||(e[8]=t("div",{class:"w-10 h-10 rounded-lg bg-valencia-100 flex items-center justify-center flex-shrink-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-valencia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),t("div",mt,[t("p",pt,l(s.workout?.name||"Workout"),1),t("p",vt,l(D(s.assigned_date)),1)]),t("span",_t,l(s.workout?.estimated_duration_min?`${s.workout.estimated_duration_min}min`:""),1)]))),128))])])):u("",!0)])):u("",!0)]))}});export{xt as default};
