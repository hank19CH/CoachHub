import{d as U,u as R,m as P,s as u,c as r,a as t,f as k,w as f,v as y,b as c,F as j,n as B,y as Q,t as p,g as x,E as Y,r as m,q,k as G,o as n}from"./index-B256TZ31.js";const I={class:"pb-20"},J={key:0,class:"p-4"},K={class:"relative"},O={key:1,class:"p-6"},X={class:"space-y-4"},Z={key:2,class:"p-6 text-center"},ee={key:3,class:"p-4 space-y-3"},te={class:"flex items-start justify-between gap-3"},oe=["onClick"],se={class:"font-semibold text-gray-900 mb-1"},re={key:0,class:"text-sm text-gray-600 mb-2 line-clamp-2"},ne={class:"flex flex-wrap gap-2 text-xs text-gray-500"},ie={key:0,class:"inline-flex items-center gap-1"},le={key:1,class:"inline-flex items-center gap-1"},ae={class:"flex gap-1 flex-shrink-0"},de=["onClick"],ue=["onClick"],ce=["onClick"],pe={key:0,class:"text-center py-8 text-gray-500"},me={class:"bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl max-h-[90vh] flex flex-col animate-slide-up"},ve={class:"flex-1 overflow-y-auto p-4 space-y-4"},we={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"},ke=["value"],fe={class:"p-4 border-t border-feed-border flex-shrink-0 space-y-2"},he=["disabled"],ge={key:0,class:"flex items-center gap-2 justify-center"},ye={key:1},be=U({__name:"WorkoutsView",setup(xe){const V=G(),a=R(),h=m([]),_=m(!0),w=m(""),b=m(!1),i=m({name:"",description:"",workout_type:"",estimated_duration_min:null,is_template:!0}),g=m(!1),v=m(""),W=q(()=>{if(!w.value)return h.value;const s=w.value.toLowerCase();return h.value.filter(e=>e.name.toLowerCase().includes(s)||e.description&&e.description.toLowerCase().includes(s))}),E=q(()=>h.value.length>0),D=["Strength","Cardio","Speed & Power","Skills","Recovery","Conditioning","Mobility","Mixed"];P(async()=>{await C()});async function C(){if(a.user)try{_.value=!0;const{data:s,error:e}=await u.from("workouts").select("*").eq("coach_id",a.user.id).is("program_week_id",null).order("created_at",{ascending:!1});if(e)throw e;h.value=s||[]}catch(s){console.error("Error loading workouts:",s)}finally{_.value=!1}}function $(){i.value={name:"",description:"",workout_type:"",estimated_duration_min:null,is_template:!0},v.value="",b.value=!0}function M(){b.value=!1,v.value=""}async function H(){if(!(!a.user||!i.value.name))try{g.value=!0,v.value="";const{data:s,error:e}=await u.from("workouts").insert({coach_id:a.user.id,name:i.value.name,description:i.value.description||null,workout_type:i.value.workout_type||null,estimated_duration_min:i.value.estimated_duration_min,is_template:i.value.is_template}).select().single();if(e)throw e;V.push(`/workouts/${s.id}/edit`)}catch(s){console.error("Error creating workout:",s),v.value=s instanceof Error?s.message:"Failed to create workout"}finally{g.value=!1}}function S(s){V.push(`/workouts/${s}/edit`)}async function L(s){if(a.user)try{const{data:e,error:o}=await u.from("workouts").insert({coach_id:a.user.id,name:`${s.name} (Copy)`,description:s.description,workout_type:s.workout_type,estimated_duration_min:s.estimated_duration_min,is_template:s.is_template}).select().single();if(o)throw o;const{data:d,error:z}=await u.from("exercises").select("*").eq("workout_id",s.id).order("order_index");if(z)throw z;if(d&&d.length>0){const T=d.map(l=>({workout_id:e.id,name:l.name,description:l.description,order_index:l.order_index,sets:l.sets,reps:l.reps,weight_kg:l.weight_kg,duration_seconds:l.duration_seconds,distance_meters:l.distance_meters,rpe:l.rpe,intensity_percent:l.intensity_percent,target_time_seconds:l.target_time_seconds,rest_seconds:l.rest_seconds,notes:l.notes,video_url:l.video_url})),{error:N}=await u.from("exercises").insert(T);if(N)throw N}await C(),alert(`Workout duplicated! "${e.name}" has been created.`)}catch(e){console.error("Error duplicating workout:",e),alert("Failed to duplicate workout")}}async function F(s){if(a.user&&confirm(`Delete "${s.name}"? This cannot be undone.`))try{const{error:e}=await u.from("exercises").delete().eq("workout_id",s.id);if(e)throw e;const{error:o}=await u.from("workouts").delete().eq("id",s.id).eq("coach_id",a.user.id);if(o)throw o;await C()}catch(e){console.error("Error deleting workout:",e),alert("Failed to delete workout")}}function A(s){if(!s)return"Not set";if(s<60)return`${s}min`;const e=Math.floor(s/60),o=s%60;return o>0?`${e}h ${o}min`:`${e}h`}return(s,e)=>(n(),r("div",I,[t("div",{class:"sticky top-0 z-10 bg-white border-b border-feed-border px-4 py-3"},[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h1",{class:"font-display text-xl font-bold text-gray-900"},"Workouts",-1)),t("button",{onClick:$,class:"btn-primary px-4 py-2 text-sm"},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),k(" New Workout ",-1)])])])]),E.value?(n(),r("div",J,[t("div",K,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o),type:"text",placeholder:"Search workouts...",class:"input pl-10"},null,512),[[y,w.value]]),e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])):c("",!0),_.value?(n(),r("div",O,[t("div",X,[(n(),r(j,null,B(3,o=>t("div",{key:o,class:"animate-pulse"},[...e[8]||(e[8]=[t("div",{class:"p-4 bg-gray-50 rounded-xl"},[t("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/2"})],-1)])])),64))])])):E.value?(n(),r("div",ee,[(n(!0),r(j,null,B(W.value,o=>(n(),r("div",{key:o.id,class:"card p-4 hover:shadow-md transition-shadow"},[t("div",te,[t("div",{onClick:d=>S(o.id),class:"flex-1 min-w-0 cursor-pointer"},[t("h3",se,p(o.name),1),o.description?(n(),r("p",re,p(o.description),1)):c("",!0),t("div",ne,[o.workout_type?(n(),r("span",ie,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),k(" "+p(o.workout_type),1)])):c("",!0),o.estimated_duration_min?(n(),r("span",le,[e[12]||(e[12]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k(" "+p(A(o.estimated_duration_min)),1)])):c("",!0)])],8,oe),t("div",ae,[t("button",{onClick:x(d=>S(o.id),["stop"]),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit workout"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,de),t("button",{onClick:x(d=>L(o),["stop"]),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Duplicate workout"},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,ue),t("button",{onClick:x(d=>F(o),["stop"]),class:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete workout"},[...e[15]||(e[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-400 hover:text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ce)])])]))),128)),W.value.length===0?(n(),r("div",pe,[t("p",null,'No workouts found matching "'+p(w.value)+'"',1)])):c("",!0)])):(n(),r("div",Z,[t("div",{class:"max-w-sm mx-auto"},[e[10]||(e[10]=Q('<div class="w-20 h-20 mx-auto mb-4 bg-summit-100 rounded-full flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-summit-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div><h2 class="font-semibold text-lg text-gray-900 mb-2">No workouts yet</h2><p class="text-gray-600 mb-6"> Create your first workout template to assign to your athletes </p>',3)),t("button",{onClick:$,class:"btn-primary w-full"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),k(" Create Your First Workout ",-1)])])])])),b.value?(n(),r("div",{key:4,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black bg-opacity-50",onClick:x(M,["self"])},[t("div",me,[t("div",{class:"p-4 border-b border-feed-border flex items-center justify-between flex-shrink-0"},[e[17]||(e[17]=t("h2",{class:"font-semibold text-lg"},"Create Workout",-1)),t("button",{onClick:M,class:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center"},[...e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ve,[v.value?(n(),r("div",we,p(v.value),1)):c("",!0),t("div",null,[e[18]||(e[18]=t("label",{class:"label"},"Workout Name *",-1)),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.name=o),type:"text",placeholder:"e.g., Lower Body Strength",class:"input",required:""},null,512),[[y,i.value.name]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"label"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.description=o),rows:"3",placeholder:"Brief overview of the workout...",class:"input resize-none"},null,512),[[y,i.value.description]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"label"},"Type",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.workout_type=o),class:"input"},[e[20]||(e[20]=t("option",{value:""},"Select type...",-1)),(n(),r(j,null,B(D,o=>t("option",{key:o,value:o},p(o),9,ke)),64))],512),[[Y,i.value.workout_type]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"label"},"Estimated Duration (minutes)",-1)),f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>i.value.estimated_duration_min=o),type:"number",min:"1",placeholder:"60",class:"input"},null,512),[[y,i.value.estimated_duration_min,void 0,{number:!0}]])]),e[23]||(e[23]=t("div",{class:"p-3 bg-summit-50 border border-summit-200 rounded-xl text-sm text-summit-800"},[t("p",{class:"font-medium mb-1"},"ðŸ’¡ Next Step"),t("p",null,"After creating the workout, you'll add exercises and set parameters (sets, reps, weight, etc.)")],-1))]),t("div",fe,[t("button",{onClick:H,disabled:!i.value.name||g.value,class:"btn-primary w-full"},[g.value?(n(),r("span",ge,[...e[24]||(e[24]=[t("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Creating... ",-1)])])):(n(),r("span",ye,"Create & Add Exercises"))],8,he),t("button",{onClick:M,class:"btn-secondary w-full"}," Cancel ")])])])):c("",!0)]))}});export{be as default};
