import{d as w,c as r,a as t,t as d,f as C,o,u as $,m as B,x as b,b as S,w as h,E as _,F as k,n as D,r as i,q as L}from"./index-B256TZ31.js";import{g as M,_ as V}from"./WorkoutCompletionCard.vue_vue_type_script_setup_true_lang-CkzK7lCJ.js";const E={class:"grid grid-cols-3 gap-3"},N={class:"card p-4 flex items-center gap-3"},F={class:"text-xl font-bold text-gray-900"},P={class:"card p-4 flex items-center gap-3"},q={class:"text-xl font-bold text-gray-900"},I={class:"card p-4 flex items-center gap-3"},T={class:"text-xl font-bold text-gray-900"},U=w({__name:"ComplianceMetrics",props:{stats:{}},setup(u){return(g,e)=>(o(),r("div",E,[t("div",N,[e[1]||(e[1]=t("span",{class:"text-2xl"},"âœ…",-1)),t("div",null,[t("p",F,d(u.stats.totalCompletions),1),e[0]||(e[0]=t("p",{class:"text-xs text-gray-600"},"Completed",-1))])]),t("div",P,[e[3]||(e[3]=t("span",{class:"text-2xl"},"ðŸ†",-1)),t("div",null,[t("p",q,d(u.stats.totalPBs),1),e[2]||(e[2]=t("p",{class:"text-xs text-gray-600"},"Personal Bests",-1))])]),t("div",I,[e[6]||(e[6]=t("span",{class:"text-2xl"},"â±ï¸",-1)),t("div",null,[t("p",T,[C(d(u.stats.avgDuration),1),e[4]||(e[4]=t("span",{class:"text-sm font-normal"},"m",-1))]),e[5]||(e[5]=t("p",{class:"text-xs text-gray-600"},"Avg Duration",-1))])])]))}}),O={class:"max-w-2xl mx-auto px-4 py-6"},R={class:"mt-6 flex gap-3"},j=["value"],z={key:1,class:"mt-8 text-center py-12"},G={key:2,class:"mt-8 p-4 bg-red-50 border border-red-200 rounded-xl"},H={class:"text-red-800 text-sm"},J={key:3,class:"mt-8 text-center py-16"},K={key:4,class:"mt-6 space-y-4 pb-20"},X=w({__name:"CoachDashboardView",setup(u){const g=$(),e=i([]),x=i(!0),p=i(null),m=i("all"),c=i(7),y=i([]);B(async()=>{await v()});async function v(){x.value=!0,p.value=null;try{const n={limit:50};if(m.value!=="all"&&(n.athleteId=m.value),c.value){const l=new Date;l.setDate(l.getDate()-c.value),n.startDate=l.toISOString()}const s=await M(g.user.id,n);e.value=s;const a=new Map;s.forEach(l=>{l.athlete&&!a.has(l.athlete.id)&&a.set(l.athlete.id,l.athlete)}),y.value=Array.from(a.values())}catch(n){console.error("Error fetching completions:",n),p.value=n.message}finally{x.value=!1}}const f=L(()=>{if(!e.value.length)return null;const n=e.value.length,s=e.value.filter(l=>l.has_pb).length,a=Math.round(e.value.reduce((l,A)=>l+(A.duration_minutes||0),0)/n);return{totalCompletions:n,totalPBs:s,avgDuration:a}});return(n,s)=>(o(),r("div",O,[s[6]||(s[6]=t("div",{class:"border-b border-gray-200 pb-4"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Athlete Activity"),t("p",{class:"text-gray-600 mt-1 text-sm"},"Monitor workout completions and provide feedback")],-1)),f.value?(o(),b(U,{key:0,stats:f.value,class:"mt-6"},null,8,["stats"])):S("",!0),t("div",R,[h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>m.value=a),onChange:v,class:"input text-sm !py-2"},[s[2]||(s[2]=t("option",{value:"all"},"All Athletes",-1)),(o(!0),r(k,null,D(y.value,a=>(o(),r("option",{key:a.id,value:a.id},d(a.display_name),9,j))),128))],544),[[_,m.value]]),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>c.value=a),onChange:v,class:"input text-sm !py-2"},[...s[3]||(s[3]=[t("option",{value:7},"Last 7 Days",-1),t("option",{value:14},"Last 14 Days",-1),t("option",{value:30},"Last 30 Days",-1),t("option",{value:null},"All Time",-1)])],544),[[_,c.value]])]),x.value?(o(),r("div",z,[...s[4]||(s[4]=[t("div",{class:"animate-spin h-8 w-8 border-4 border-summit-800 border-t-transparent rounded-full mx-auto"},null,-1),t("p",{class:"mt-3 text-gray-600 text-sm"},"Loading activity...",-1)])])):p.value?(o(),r("div",G,[t("p",H,d(p.value),1)])):e.value.length?(o(),r("div",K,[(o(!0),r(k,null,D(e.value,a=>(o(),b(V,{key:a.id,completion:a,onFeedbackAdded:v},null,8,["completion"]))),128))])):(o(),r("div",J,[...s[5]||(s[5]=[t("div",{class:"text-4xl mb-3"},"ðŸ“Š",-1),t("p",{class:"text-gray-600 font-medium"},"No workout completions found",-1),t("p",{class:"text-sm text-gray-500 mt-1"}," Completions will appear here once athletes finish workouts ",-1)])]))]))}});export{X as default};
