import{d as I,u as O,m as R,c as o,a as t,y as z,F as w,n as g,A as J,z as N,g as y,t as r,w as k,v as U,E as T,f as F,b as h,G as H,h as K,k as Q,r as i,o as l}from"./index-DoIKaNgo.js";import{g as C,a as W,b as X,d as Z,c as ee,u as te}from"./groups-Bm0zxoQ-.js";import{_ as se}from"./Toast.vue_vue_type_script_setup_true_lang-hv403Wzn.js";const le={class:"pb-20"},ae={class:"sticky top-0 bg-white/90 backdrop-blur-sm z-10 border-b border-gray-100"},oe={class:"flex items-center justify-between p-4"},ne={key:0,class:"p-6 space-y-4"},ie={key:1,class:"p-8 text-center"},re={key:2,class:"p-4 space-y-3"},ue=["onClick"],de={class:"flex items-start gap-3"},ve={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-summit-600 to-summit-800 flex items-center justify-center text-white font-bold text-sm flex-shrink-0"},me={key:0},pe={key:1},ce={class:"flex-1 min-w-0"},fe={class:"font-semibold text-gray-900 truncate"},be={key:0,class:"text-xs text-summit-600 font-medium"},xe={class:"text-sm text-gray-500 mt-0.5"},we={key:0,class:"ml-2"},ye={class:"flex gap-1"},ge=["onClick"],ke=["onClick"],he={class:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-md p-6 max-h-[90vh] overflow-y-auto"},_e={class:"text-lg font-semibold text-gray-900 mb-4"},Ce=["value"],Me=["value"],Ge={class:"flex gap-3 pt-2"},Ve=["disabled"],$e=["disabled"],je={key:0,class:"flex items-center gap-2"},De={key:1},Be={class:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-xl"},Se={class:"text-sm text-gray-600 mb-6"},ze={class:"flex gap-3"},Ne=["disabled"],Ue=["disabled"],Te={key:0,class:"flex items-center gap-2"},Fe={key:1},Le=I({__name:"GroupsView",setup(He){const M=Q(),u=O(),m=i([]),G=i([]),V=i([]),$=i(!0),f=i(!1),d=i(!1),b=i(!1),p=i(!1),x=i(!1),v=i(null),j=i(""),D=i("success"),_=i(!1);function c(n,e="success"){j.value=n,D.value=e,_.value=!0}const a=i({name:"",description:"",sport_id:"",team_id:""});R(async()=>{if(!u.user)return;const[n,e,s]=await Promise.all([C(u.user.id),W(u.user.id),X()]);m.value=n,G.value=e,V.value=s,$.value=!1});function B(){a.value={name:"",description:"",sport_id:"",team_id:""},f.value=!0}function A(n){v.value=n,a.value={name:n.name,description:n.description||"",sport_id:n.sport_id||"",team_id:n.team_id||""},d.value=!0}function E(n){v.value=n,b.value=!0}async function P(){if(!u.user||!a.value.name.trim())return;p.value=!0,await ee({coach_id:u.user.id,name:a.value.name.trim(),description:a.value.description.trim()||null,sport_id:a.value.sport_id||null,team_id:a.value.team_id||null})?(m.value=await C(u.user.id),f.value=!1,c("Group created successfully!")):c("Failed to create group. Please try again.","error"),p.value=!1}async function L(){if(!v.value||!a.value.name.trim())return;p.value=!0,await te(v.value.id,{name:a.value.name.trim(),description:a.value.description.trim()||null,sport_id:a.value.sport_id||null,team_id:a.value.team_id||null})&&u.user?(m.value=await C(u.user.id),d.value=!1,c("Group updated successfully!")):c("Failed to update group. Please try again.","error"),p.value=!1}async function Y(){if(!v.value||!u.user)return;x.value=!0,await Z(v.value.id)?(m.value=m.value.filter(e=>e.id!==v.value.id),b.value=!1,c("Group deleted")):c("Failed to delete group. Please try again.","error"),x.value=!1}function q(n){return n.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}return(n,e)=>(l(),o(w,null,[t("div",le,[t("div",ae,[t("div",oe,[t("button",{onClick:e[0]||(e[0]=s=>z(M).back()),class:"text-gray-600 hover:text-gray-900 p-1"},[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])]),e[13]||(e[13]=t("h1",{class:"font-display text-lg font-semibold text-gray-900"},"My Groups",-1)),t("button",{onClick:B,class:"text-summit-700 hover:text-summit-800 p-1"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)])])])]),$.value?(l(),o("div",ne,[(l(),o(w,null,g(3,s=>t("div",{key:s,class:"animate-pulse"},[...e[14]||(e[14]=[t("div",{class:"bg-gray-200 rounded-2xl h-24"},null,-1)])])),64))])):m.value.length===0?(l(),o("div",ie,[e[15]||(e[15]=J('<div class="w-20 h-20 mx-auto mb-4 rounded-full bg-summit-100 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-summit-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h2 class="font-display text-xl font-bold text-gray-900 mb-2">No Groups Yet</h2><p class="text-gray-600 text-sm mb-6">Create groups to organize your athletes and assign programs to entire teams.</p>',3)),t("button",{onClick:B,class:"btn-primary"},"Create Your First Group")])):(l(),o("div",re,[(l(!0),o(w,null,g(m.value,s=>(l(),o("div",{key:s.id,class:"card-hover p-4 cursor-pointer",onClick:S=>z(M).push(`/coach/groups/${s.id}`)},[t("div",de,[t("div",ve,[s.sport?.icon?(l(),o("span",me,r(s.sport.icon),1)):(l(),o("span",pe,r(q(s.name)),1))]),t("div",ce,[t("h3",fe,r(s.name),1),s.team?(l(),o("p",be,r(s.team.name),1)):h("",!0),t("p",xe,[F(r(s.member_count||0)+" "+r(s.member_count===1?"athlete":"athletes")+" ",1),s.sport?(l(),o("span",we,r(s.sport.name),1)):h("",!0)])]),t("div",ye,[t("button",{onClick:y(S=>A(s),["stop"]),class:"p-2 text-gray-400 hover:text-summit-700 transition-colors"},[...e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ge),t("button",{onClick:y(S=>E(s),["stop"]),class:"p-2 text-gray-400 hover:text-red-500 transition-colors"},[...e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ke)])])],8,ue))),128))]))]),(l(),N(H,{to:"body"},[f.value||d.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50",onClick:e[7]||(e[7]=y(s=>{f.value=!1,d.value=!1},["self"]))},[t("div",he,[t("h3",_e,r(d.value?"Edit Group":"Create Group"),1),t("form",{onSubmit:e[6]||(e[6]=y(s=>d.value?L():P(),["prevent"])),class:"space-y-4"},[t("div",null,[e[18]||(e[18]=t("label",{class:"label"},"Group Name *",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name=s),type:"text",class:"input",placeholder:"e.g., U18 Boys",required:""},null,512),[[U,a.value.name]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"label"},"Sport",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.sport_id=s),class:"input"},[e[19]||(e[19]=t("option",{value:""},"Select sport (optional)",-1)),(l(!0),o(w,null,g(V.value,s=>(l(),o("option",{key:s.id,value:s.id},r(s.icon?s.icon+" ":"")+r(s.name),9,Ce))),128))],512),[[T,a.value.sport_id]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"label"},"Team",-1)),k(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.team_id=s),class:"input"},[e[21]||(e[21]=t("option",{value:""},"No team (standalone group)",-1)),(l(!0),o(w,null,g(G.value,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name),9,Me))),128))],512),[[T,a.value.team_id]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"label"},"Description",-1)),k(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.description=s),class:"input",rows:"3",placeholder:"Optional description..."},null,512),[[U,a.value.description]])]),t("div",Ge,[t("button",{type:"button",onClick:e[5]||(e[5]=s=>{f.value=!1,d.value=!1}),class:"flex-1 btn-secondary",disabled:p.value}," Cancel ",8,Ve),t("button",{type:"submit",class:"flex-1 btn-primary",disabled:p.value||!a.value.name.trim()},[p.value?(l(),o("span",je,[...e[24]||(e[24]=[t("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),F(" Saving... ",-1)])])):(l(),o("span",De,r(d.value?"Update":"Create"),1))],8,$e)])],32)])])):h("",!0)])),K(se,{message:j.value,type:D.value,visible:_.value,onClose:e[8]||(e[8]=s=>_.value=!1)},null,8,["message","type","visible"]),(l(),N(H,{to:"body"},[b.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:e[10]||(e[10]=y(s=>b.value=!1,["self"]))},[t("div",Be,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Delete Group?",-1)),t("p",Se,' Are you sure you want to delete "'+r(v.value?.name)+'"? All members will be removed from the group. ',1),t("div",ze,[t("button",{onClick:e[9]||(e[9]=s=>b.value=!1),class:"flex-1 btn-secondary",disabled:x.value},"Cancel",8,Ne),t("button",{onClick:Y,class:"flex-1 btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",disabled:x.value},[x.value?(l(),o("span",Te,[...e[25]||(e[25]=[t("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)])])):(l(),o("span",Fe,"Delete"))],8,Ue)])])])):h("",!0)]))],64))}});export{Le as default};
