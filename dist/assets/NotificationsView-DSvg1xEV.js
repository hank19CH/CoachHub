import{d as y,o,c as s,p as i,a as t,t as v,b as w,g as M,q as k,B as $,C as _,m as j,y as u,f as B,F as N,n as V,r as z,z as A,k as L}from"./index-DoIKaNgo.js";import{f as T}from"./formatDistanceToNow-CDssafZe.js";import"./en-US-BZ0UpF_e.js";const D={class:"flex-shrink-0"},H=["src","alt"],R={class:"flex-1 min-w-0"},S={class:"text-sm font-medium text-gray-900"},F={key:0,class:"text-sm text-gray-600 mt-0.5 line-clamp-2"},q={class:"text-xs text-gray-400 mt-1"},E={class:"flex-shrink-0 flex items-center gap-2"},I={key:0,class:"w-2.5 h-2.5 rounded-full bg-summit-500"},U=y({__name:"NotificationItem",props:{notification:{}},emits:["click","delete"],setup(l){const f=l,d=k(()=>{try{return T(new Date(f.notification.created_at),{addSuffix:!0})}catch{return""}}),r=k(()=>({like:"heart",comment:"chat",follow:"user-plus",workout_assigned:"clipboard",workout_completed:"check-circle",personal_best:"trophy"})[f.notification.type]||"bell"),p=k(()=>({like:"bg-red-100",comment:"bg-blue-100",follow:"bg-purple-100",workout_assigned:"bg-summit-100",workout_completed:"bg-emerald-100",personal_best:"bg-yellow-100"})[f.notification.type]||"bg-gray-100"),a=k(()=>({like:"text-red-600",comment:"text-blue-600",follow:"text-purple-600",workout_assigned:"text-summit-700",workout_completed:"text-emerald-600",personal_best:"text-yellow-600"})[f.notification.type]||"text-gray-600");return(m,e)=>(o(),s("div",{class:i(["flex items-start gap-3 p-4 cursor-pointer transition-colors",l.notification.is_read?"hover:bg-gray-50":"bg-summit-50/60 hover:bg-summit-100/60"]),onClick:e[1]||(e[1]=g=>m.$emit("click"))},[t("div",D,[l.notification.actor?.avatar_url?(o(),s("img",{key:0,src:l.notification.actor.avatar_url,alt:l.notification.actor.display_name,class:"w-10 h-10 rounded-full object-cover"},null,8,H)):(o(),s("div",{key:1,class:i(["w-10 h-10 rounded-full flex items-center justify-center",p.value])},[r.value==="heart"?(o(),s("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)):r.value==="chat"?(o(),s("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)):r.value==="user-plus"?(o(),s("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},null,-1)])],2)):r.value==="clipboard"?(o(),s("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},null,-1)])],2)):r.value==="check-circle"?(o(),s("svg",{key:4,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)):r.value==="trophy"?(o(),s("svg",{key:5,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 3h14M5 3v4a7 7 0 007 7m-7-7H3m16 0h-2m2 0v4a7 7 0 01-7 7m0 0v3m0-3h-4m4 0h4m-8 3h8"},null,-1)])],2)):(o(),s("svg",{key:6,xmlns:"http://www.w3.org/2000/svg",class:i(["w-5 h-5",a.value]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},null,-1)])],2))],2))]),t("div",R,[t("p",S,v(l.notification.title),1),l.notification.message?(o(),s("p",F,v(l.notification.message),1)):w("",!0),t("p",q,v(d.value),1)]),t("div",E,[l.notification.is_read?w("",!0):(o(),s("div",I)),t("button",{onClick:e[0]||(e[0]=M(g=>m.$emit("delete"),["stop"])),class:"p-1.5 text-gray-300 hover:text-gray-500 rounded-full hover:bg-gray-100 transition-colors",title:"Remove notification"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])],2))}}),W={class:"notifications-view pb-20"},Y={class:"sticky top-14 z-10 bg-white border-b border-gray-200"},G={class:"flex items-center justify-between px-4 py-3"},J={class:"flex border-b border-gray-200"},K={key:0,class:"ml-1.5 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-valencia-500 rounded-full min-w-[20px]"},O={key:0,class:"flex items-center justify-center py-12"},P={key:1,class:"p-4 mx-4 mt-4 bg-red-50 border border-red-200 rounded-lg"},Q={class:"text-sm text-red-800"},X={key:2,class:"flex flex-col items-center justify-center py-16 px-4"},Z={class:"text-lg font-semibold text-gray-900 mb-1"},tt={class:"text-sm text-gray-500 text-center max-w-xs"},et={key:3,class:"divide-y divide-gray-100"},rt=y({__name:"NotificationsView",setup(l){const f=L(),d=$(),r=z("all"),{notifications:p,loading:a,error:m,unreadCount:e,unreadNotifications:g}=_(d),h=k(()=>r.value==="unread"?g.value:p.value);function b(x){x.is_read||d.markAsRead(x.id),x.action_url&&f.push(x.action_url)}return j(()=>{d.fetchNotifications()}),(x,n)=>(o(),s("div",W,[t("div",Y,[t("div",G,[n[4]||(n[4]=t("h1",{class:"text-xl font-bold text-gray-900"},"Notifications",-1)),u(e)>0?(o(),s("button",{key:0,onClick:n[0]||(n[0]=c=>u(d).markAllAsRead()),class:"text-sm font-medium text-summit-600 hover:text-summit-700 transition-colors"}," Mark all as read ")):w("",!0)]),t("div",J,[t("button",{onClick:n[1]||(n[1]=c=>r.value="all"),class:i(["flex-1 px-4 py-3 text-sm font-medium transition-colors",r.value==="all"?"text-summit-600 border-b-2 border-summit-600":"text-gray-500 hover:text-gray-700"])}," All ",2),t("button",{onClick:n[2]||(n[2]=c=>r.value="unread"),class:i(["flex-1 px-4 py-3 text-sm font-medium transition-colors relative",r.value==="unread"?"text-summit-600 border-b-2 border-summit-600":"text-gray-500 hover:text-gray-700"])},[n[5]||(n[5]=B(" Unread ",-1)),u(e)>0?(o(),s("span",K,v(u(e)),1)):w("",!0)],2)])]),u(a)?(o(),s("div",O,[...n[6]||(n[6]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-summit-600"},null,-1)])])):u(m)?(o(),s("div",P,[t("p",Q,v(u(m)),1),t("button",{onClick:n[3]||(n[3]=c=>u(d).fetchNotifications()),class:"mt-2 text-sm font-medium text-red-600 hover:text-red-700"}," Try again ")])):h.value.length===0?(o(),s("div",X,[n[7]||(n[7]=t("div",{class:"w-20 h-20 mx-auto mb-6 rounded-full bg-summit-100 flex items-center justify-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10 text-summit-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),t("h3",Z,v(r.value==="unread"?"All caught up!":"No notifications yet"),1),t("p",tt,v(r.value==="unread"?"You have no unread notifications.":"When someone likes, comments, or interacts with you, you'll see it here."),1)])):(o(),s("div",et,[(o(!0),s(N,null,V(h.value,c=>(o(),A(U,{key:c.id,notification:c,onClick:C=>b(c),onDelete:C=>u(d).deleteNotification(c.id)},null,8,["notification","onClick","onDelete"]))),128))]))]))}});export{rt as default};
