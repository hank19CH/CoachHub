import{d as _,u as $,m as M,c as l,a as e,t as f,f as y,r as a,o as r,F as j,n as I,z as B,b as L,h as S,q as V,k as H}from"./index-CR_8Ibs2.js";import{g as T,f as z}from"./athletes-CyaJPgAV.js";import{A as D}from"./AssignWorkoutModal-Cq8LLJVk.js";import"./assignments-B69FrS5a.js";import"./streaks-sQ-aq7wy.js";import"./posts-q9q58uK3.js";const E={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},N={class:"bg-white rounded-lg max-w-md w-full p-6"},U={class:"flex items-center justify-between mb-6"},F={key:0,class:"flex justify-center py-8"},q={key:1,class:"text-center py-8"},J={class:"text-red-600 mb-4"},O={key:2},W={class:"bg-gray-50 rounded-lg p-4 mb-4"},G={class:"flex gap-2"},P=["value"],Q={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={class:"bg-summit-50 rounded-lg p-4 mb-6"},X={class:"text-3xl font-bold text-summit-600 tracking-wider text-center"},Z=_({__name:"InviteAthleteModal",emits:["close"],setup(A){const x=$(),g=a(!0),c=a(null),m=a(""),d=a(!1),v=a(null),u=a("");async function p(){g.value=!0,c.value=null;try{if(!x.profile?.id)throw new Error("User not authenticated");const s=await T(x.profile.id);m.value=s;const t=window.location.origin;u.value=`${t}/signup?invite=${s}`}catch(s){console.error("Error generating invite code:",s),c.value="Failed to generate invite link. Please try again."}finally{g.value=!1}}async function b(){try{await navigator.clipboard.writeText(u.value),d.value=!0,setTimeout(()=>{d.value=!1},2e3)}catch{v.value?.select(),document.execCommand("copy"),d.value=!0,setTimeout(()=>{d.value=!1},2e3)}}function k(){const s=encodeURIComponent("Join me on CoachHub!"),t=encodeURIComponent(`I'd like to invite you to join my athlete roster on CoachHub.

Click this link to get started:
${u.value}

Or use invite code: ${m.value}`);window.location.href=`mailto:?subject=${s}&body=${t}`}function w(){const s=encodeURIComponent(`Join my athlete roster on CoachHub! ${u.value}`);window.location.href=`sms:?body=${s}`}return M(()=>{p()}),(s,t)=>(r(),l("div",E,[e("div",N,[e("div",U,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Invite Athlete",-1)),e("button",{onClick:t[0]||(t[0]=C=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition"},[...t[2]||(t[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),g.value?(r(),l("div",F,[...t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-summit-600"},null,-1)])])):c.value?(r(),l("div",q,[e("p",J,f(c.value),1),e("button",{onClick:p,class:"bg-summit-600 text-white px-6 py-2 rounded-lg hover:bg-summit-700 transition"}," Try Again ")])):(r(),l("div",O,[t[13]||(t[13]=e("p",{class:"text-gray-600 mb-4"}," Share this link with your athlete. They'll be able to create an account and automatically join your roster. ",-1)),e("div",W,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Invite Link",-1)),e("div",G,[e("input",{ref_key:"linkInput",ref:v,type:"text",value:u.value,readonly:"",class:"flex-1 px-3 py-2 border rounded-lg bg-white text-sm"},null,8,P),e("button",{onClick:b,class:"bg-summit-600 text-white px-4 py-2 rounded-lg hover:bg-summit-700 transition flex items-center gap-2"},[d.value?(r(),l("svg",Y,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(r(),l("svg",Q,[...t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),y(" "+f(d.value?"Copied!":"Copy"),1)])])]),e("div",K,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Invite Code",-1)),e("div",X,f(m.value),1),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 text-center mt-2"}," Athletes can also enter this code during signup ",-1))]),e("div",{class:"space-y-2"},[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Share via:",-1)),e("div",{class:"grid grid-cols-2 gap-2"},[e("button",{onClick:k,class:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),y(" Email ",-1)])]),e("button",{onClick:w,class:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1),y(" SMS ",-1)])])])]),e("button",{onClick:t[1]||(t[1]=C=>s.$emit("close")),class:"w-full mt-6 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition font-medium"}," Done ")]))])]))}}),R={class:"min-h-screen bg-gray-50 pb-20"},ee={class:"bg-white border-b sticky top-0 z-10"},te={class:"max-w-2xl mx-auto px-4 py-4"},oe={class:"flex items-center justify-between"},se={class:"max-w-2xl mx-auto px-4 py-6"},ne={key:0,class:"flex justify-center py-12"},re={key:1,class:"text-center py-12"},ie={key:2,class:"grid gap-4 grid-cols-1 md:grid-cols-2"},le={class:"flex items-start gap-3"},ae=["src","alt"],de={class:"flex-1 min-w-0"},ue={class:"font-semibold text-gray-900 truncate"},ce={class:"text-sm text-gray-500"},me={class:"text-xs text-gray-400 mt-1"},ve=["onClick"],ge={class:"mt-3 pt-3 border-t border-gray-100"},pe=["onClick"],we=_({__name:"AthletesView",setup(A){const x=H(),g=$(),c=a(!0),m=a([]),d=a(""),v=a(!1),u=a(!1),p=a(null),b=V(()=>{if(!d.value)return m.value;const n=d.value.toLowerCase();return m.value.filter(o=>o.athlete.display_name.toLowerCase().includes(n)||o.athlete.username.toLowerCase().includes(n))}),k=n=>{if(!n)return"Never";const o=new Date(n),h=Math.floor((new Date().getTime()-o.getTime())/(1e3*60*60*24));return h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:o.toLocaleDateString()};function w(n){p.value=n,u.value=!0}function s(){u.value=!1,p.value=null}function t(n){s()}function C(n){x.push(`/coach/athletes/${n}`)}return M(async()=>{c.value=!0;try{g.profile?.id&&(m.value=await z(g.profile.id))}catch(n){console.error("Error fetching athletes:",n)}finally{c.value=!1}}),(n,o)=>(r(),l("div",R,[e("div",ee,[e("div",te,[e("div",oe,[o[4]||(o[4]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Athletes",-1)),e("button",{onClick:o[0]||(o[0]=i=>v.value=!0),class:"bg-summit-600 text-white px-4 py-2 rounded-lg hover:bg-summit-700 transition flex items-center gap-2"},[...o[3]||(o[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Add Athlete ",-1)])])])])]),e("div",se,[c.value?(r(),l("div",ne,[...o[5]||(o[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-summit-600"},null,-1)])])):m.value.length===0?(r(),l("div",re,[o[6]||(o[6]=e("svg",{class:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o[7]||(o[7]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No athletes yet",-1)),o[8]||(o[8]=e("p",{class:"mt-2 text-gray-500"},"Get started by inviting your first athlete",-1)),e("button",{onClick:o[1]||(o[1]=i=>v.value=!0),class:"mt-6 bg-summit-600 text-white px-6 py-3 rounded-lg hover:bg-summit-700 transition"}," Invite Athlete ")])):(r(),l("div",ie,[(r(!0),l(j,null,I(b.value,i=>(r(),l("div",{key:i.id,class:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition"},[e("div",le,[e("img",{src:i.athlete.avatar_url||"https://via.placeholder.com/48",alt:i.athlete.display_name,class:"w-12 h-12 rounded-full object-cover"},null,8,ae),e("div",de,[e("h3",ue,f(i.athlete.display_name),1),e("p",ce,"@"+f(i.athlete.username),1),e("p",me," Last active: "+f(k(i.last_workout_date)),1)]),e("button",{onClick:h=>C(i.athlete.id),class:"text-summit-600 hover:text-summit-700 text-sm font-medium"}," View ",8,ve)]),e("div",ge,[e("button",{onClick:h=>w(i.athlete.id),class:"w-full px-4 py-2 text-sm font-medium text-summit-600 hover:bg-summit-50 rounded-lg transition-colors flex items-center justify-center gap-2"},[...o[9]||(o[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),y(" Assign Workout ",-1)])],8,pe)])]))),128))]))]),v.value?(r(),B(Z,{key:0,onClose:o[2]||(o[2]=i=>v.value=!1)})):L("",!0),S(D,{"is-open":u.value,"preselected-athlete-id":p.value,onClose:s,onAssigned:t},null,8,["is-open","preselected-athlete-id"])]))}});export{we as default};
