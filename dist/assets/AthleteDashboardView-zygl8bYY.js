import{d as M,o,c as n,a as t,t as s,p as R,b as c,f as b,F as _,n as $,q as k,m as B,A as z,x as W,h as A,M as I,i as G,N as H,u as q,r as y,D as K,B as J,w as Q,v as X,k as Y}from"./index-B256TZ31.js";import{a as S}from"./assignments-M1g5xLhx.js";const Z={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md transition-shadow"},tt={class:"flex items-start justify-between mb-4"},et={class:"flex items-center gap-3"},st=["src","alt"],ot={key:1,class:"w-10 h-10 rounded-full bg-summit-100 flex items-center justify-center"},nt={class:"text-summit-600 font-semibold text-sm"},at={class:"text-sm font-medium text-gray-900"},it={class:"text-xs text-gray-500"},rt={class:"text-xl font-bold text-gray-900 mb-2"},lt={key:0,class:"text-sm text-gray-600 mb-4 line-clamp-2"},dt={class:"flex items-center gap-4 text-sm text-gray-600 mb-4"},ut={key:0,class:"flex items-center gap-1"},ct={key:1,class:"flex items-center gap-1"},mt={class:"flex items-center gap-1"},gt={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},ht={class:"text-sm text-blue-900"},xt={key:2,class:"space-y-2 mb-4"},vt={class:"flex-shrink-0 w-5 h-5 rounded-full bg-summit-100 text-summit-600 text-xs font-semibold flex items-center justify-center"},pt={class:"flex-1"},ft={class:"font-medium text-gray-900"},yt={class:"text-xs text-gray-600"},kt={key:0,class:"text-xs text-gray-500 italic"},bt={class:"flex gap-3 mt-4"},wt=M({__name:"AssignmentCard",props:{assignment:{}},emits:["view-details","start-workout"],setup(e,{emit:w}){const v=e,u=w,f=k(()=>{switch(v.assignment.status){case"completed":return{text:"Completed",class:"bg-green-100 text-green-800"};case"skipped":return{text:"Skipped",class:"bg-gray-100 text-gray-800"};default:return{text:"Pending",class:"bg-blue-100 text-blue-800"}}}),p=k(()=>v.assignment.exercises?.length||0),i=k(()=>v.assignment.exercises?.slice(0,3)||[]),a=k(()=>p.value>3);function m(g){const d=[];if(g.sets&&d.push(`${g.sets} sets`),g.reps&&d.push(`${g.reps} reps`),g.weight_kg&&d.push(`${g.weight_kg}kg`),g.duration_seconds){const x=Math.floor(g.duration_seconds/60);d.push(`${x} min`)}return d.join(" × ")||"Details in workout"}return(g,d)=>(o(),n("div",Z,[t("div",tt,[t("div",et,[e.assignment.coach?.avatar_url?(o(),n("img",{key:0,src:e.assignment.coach.avatar_url,alt:e.assignment.coach.display_name,class:"w-10 h-10 rounded-full object-cover"},null,8,st)):(o(),n("div",ot,[t("span",nt,s(e.assignment.coach?.display_name?.charAt(0)||"?"),1)])),t("div",null,[t("p",at,s(e.assignment.coach?.display_name||"Coach"),1),t("p",it,"@"+s(e.assignment.coach?.username||"unknown"),1)])]),t("span",{class:R([f.value.class,"px-3 py-1 rounded-full text-xs font-semibold"])},s(f.value.text),3)]),t("h3",rt,s(e.assignment.workout?.name||"Unnamed Workout"),1),e.assignment.workout?.description?(o(),n("p",lt,s(e.assignment.workout.description),1)):c("",!0),t("div",dt,[e.assignment.workout?.estimated_duration_min?(o(),n("span",ut,[d[2]||(d[2]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b(" "+s(e.assignment.workout.estimated_duration_min)+" min ",1)])):c("",!0),e.assignment.workout?.workout_type?(o(),n("span",ct,[d[3]||(d[3]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),b(" "+s(e.assignment.workout.workout_type),1)])):c("",!0),t("span",mt,[d[4]||(d[4]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),b(" "+s(p.value)+" exercises ",1)])]),e.assignment.notes?(o(),n("div",gt,[t("p",ht,[d[5]||(d[5]=t("span",{class:"font-semibold"},"Coach's Note:",-1)),b(" "+s(e.assignment.notes),1)])])):c("",!0),i.value.length>0?(o(),n("div",xt,[d[6]||(d[6]=t("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Exercise Preview",-1)),(o(!0),n(_,null,$(i.value,(x,C)=>(o(),n("div",{key:x.id,class:"flex items-start gap-2 text-sm"},[t("span",vt,s(C+1),1),t("div",pt,[t("p",ft,s(x.name),1),t("p",yt,s(m(x)),1)])]))),128)),a.value?(o(),n("p",kt," + "+s(p.value-3)+" more exercises ",1)):c("",!0)])):c("",!0),t("div",bt,[t("button",{onClick:d[0]||(d[0]=x=>u("view-details")),class:"flex-1 px-4 py-2 border border-summit-600 text-summit-600 rounded-lg font-medium hover:bg-summit-50 transition-colors"}," View Details "),e.assignment.status==="pending"?(o(),n("button",{key:0,onClick:d[1]||(d[1]=x=>u("start-workout")),class:"flex-1 px-4 py-2 bg-summit-600 text-white rounded-lg font-medium hover:bg-summit-700 transition-colors"}," Start Workout ")):c("",!0)])]))}}),_t={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},$t={class:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col"},Ct={class:"px-6 py-5 border-b border-gray-200 flex items-start justify-between"},Dt={class:"flex-1 pr-4"},St={class:"text-2xl font-bold text-gray-900 mb-2"},Mt={class:"flex items-center gap-2"},jt=["src","alt"],Tt={class:"text-sm text-gray-600"},Bt={class:"flex-1 overflow-y-auto px-6 py-5"},Wt={class:"flex flex-wrap gap-4 text-sm text-gray-600 mb-5"},At={key:0,class:"flex items-center gap-1"},Et={key:1},Vt={class:"text-summit-600 font-semibold"},Nt={class:"flex items-center gap-1"},Ot={key:0,class:"mb-5"},Ft={class:"text-gray-700 leading-relaxed"},Ut={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-5"},Lt={class:"text-sm text-blue-900"},Pt={class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3"},Rt={class:"space-y-4"},zt={class:"flex items-start gap-3"},It={class:"flex-shrink-0 w-8 h-8 rounded-full bg-summit-600 text-white text-sm font-bold flex items-center justify-center"},Gt={class:"flex-1"},Ht={class:"font-semibold text-gray-900 mb-1"},qt={class:"text-sm text-gray-600 mb-2"},Kt={key:0,class:"text-xs text-gray-500 italic"},Jt={class:"px-6 py-4 border-t border-gray-200 flex gap-3"},Qt=M({__name:"WorkoutPreviewModal",props:{isOpen:{type:Boolean},assignment:{}},emits:["close","start-workout"],setup(e,{emit:w}){const v=e,u=w;function f(i){const a=[];if(i.sets&&i.reps?a.push(`${i.sets} sets × ${i.reps} reps`):i.sets?a.push(`${i.sets} sets`):i.reps&&a.push(`${i.reps} reps`),i.weight_kg&&a.push(`${i.weight_kg}kg`),i.duration_seconds){const m=Math.floor(i.duration_seconds/60),g=i.duration_seconds%60;a.push(g>0?`${m}:${g.toString().padStart(2,"0")}`:`${m} min`)}return i.distance_meters&&a.push(i.distance_meters>=1e3?`${(i.distance_meters/1e3).toFixed(1)}km`:`${i.distance_meters}m`),i.rpe&&a.push(`RPE ${i.rpe}`),i.rest_seconds&&a.push(`Rest: ${i.rest_seconds}s`),a.join(" • ")}function p(i){i.key==="Escape"&&v.isOpen&&u("close")}return B(()=>{document.addEventListener("keydown",p)}),z(()=>{document.removeEventListener("keydown",p)}),(i,a)=>(o(),W(H,{to:"body"},[A(I,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:G(()=>[e.isOpen&&e.assignment?(o(),n("div",_t,[t("div",{class:"absolute inset-0 bg-black/50",onClick:a[0]||(a[0]=m=>u("close"))}),t("div",$t,[t("div",Ct,[t("div",Dt,[t("h2",St,s(e.assignment.workout?.name||"Workout Details"),1),t("div",Mt,[e.assignment.coach?.avatar_url?(o(),n("img",{key:0,src:e.assignment.coach.avatar_url,alt:e.assignment.coach.display_name,class:"w-6 h-6 rounded-full object-cover"},null,8,jt)):c("",!0),t("span",Tt,s(e.assignment.coach?.display_name||"Coach"),1)])]),t("button",{onClick:a[1]||(a[1]=m=>u("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...a[4]||(a[4]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Bt,[t("div",Wt,[e.assignment.workout?.estimated_duration_min?(o(),n("span",At,[a[5]||(a[5]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b(" "+s(e.assignment.workout.estimated_duration_min)+" min ",1)])):c("",!0),e.assignment.workout?.workout_type?(o(),n("span",Et,[t("span",Vt,s(e.assignment.workout.workout_type),1)])):c("",!0),t("span",Nt,[a[6]||(a[6]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),b(" "+s(e.assignment.exercises?.length||0)+" exercises ",1)])]),e.assignment.workout?.description?(o(),n("div",Ot,[a[7]||(a[7]=t("h3",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-2"},"Description",-1)),t("p",Ft,s(e.assignment.workout.description),1)])):c("",!0),e.assignment.notes?(o(),n("div",Ut,[a[8]||(a[8]=t("h3",{class:"text-sm font-semibold text-blue-900 mb-1"},"Coach's Note",-1)),t("p",Lt,s(e.assignment.notes),1)])):c("",!0),t("div",null,[t("h3",Pt," Exercises ("+s(e.assignment.exercises?.length||0)+") ",1),t("div",Rt,[(o(!0),n(_,null,$(e.assignment.exercises,(m,g)=>(o(),n("div",{key:m.id,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},[t("div",zt,[t("span",It,s(g+1),1),t("div",Gt,[t("h4",Ht,s(m.name),1),t("p",qt,s(f(m)),1),m.notes?(o(),n("p",Kt," Note: "+s(m.notes),1)):c("",!0)])])]))),128))])])]),t("div",Jt,[t("button",{onClick:a[2]||(a[2]=m=>u("close")),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors"}," Close "),e.assignment.status==="pending"?(o(),n("button",{key:0,onClick:a[3]||(a[3]=m=>u("start-workout")),class:"flex-1 px-4 py-2 bg-summit-600 text-white rounded-lg font-medium hover:bg-summit-700 transition-colors"}," Start Workout ")):c("",!0)])])])):c("",!0)]),_:1})]))}}),Xt={class:"min-h-screen bg-gray-50 pb-20"},Yt={class:"bg-white border-b border-gray-200"},Zt={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},te={class:"mb-6"},ee={class:"text-3xl font-bold text-gray-900"},se={key:0,class:"grid grid-cols-3 gap-4 mb-6"},oe={class:"bg-summit-50 rounded-lg p-4"},ne={class:"text-2xl font-bold text-summit-900"},ae={class:"bg-green-50 rounded-lg p-4"},ie={class:"text-2xl font-bold text-green-900"},re={class:"bg-valencia-50 rounded-lg p-4"},le={class:"text-2xl font-bold text-valencia-900"},de={class:"flex items-center gap-3"},ue={class:"text-gray-600 mt-3"},ce={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},me={key:0,class:"flex justify-center items-center py-20"},ge={key:1,class:"text-center py-20"},he={class:"text-gray-600 mb-4"},xe={key:2,class:"text-center py-20"},ve={class:"text-gray-500"},pe={key:3},fe={class:"text-xl font-bold text-gray-900 mb-4"},ye={class:"space-y-4"},ke={key:4,class:"mt-12"},be={class:"space-y-3"},we={class:"flex items-center justify-between mb-3"},_e={class:"text-sm font-semibold text-summit-600"},$e={key:0,class:"text-xs text-gray-500"},Ce={class:"font-semibold text-gray-900 mb-2"},De={class:"flex items-center gap-2"},Se=["src","alt"],Me={class:"text-sm text-gray-600"},Be=M({__name:"AthleteDashboardView",setup(e){const w=Y(),v=q(),u=y(new Date().toISOString().split("T")[0]),f=y([]),p=y([]),i=y(null),a=y(!0),m=y(null),g=y(null),d=y(!1),x=k(()=>u.value===new Date().toISOString().split("T")[0]),C=k(()=>new Date(u.value+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),E=k(()=>{const r=new Date().getHours();return r<12?"Good morning":r<18?"Good afternoon":"Good evening"});async function D(){if(v.user?.id){a.value=!0,m.value=null;try{const r=await S.fetchAssignmentsForDate(v.user.id,u.value);f.value=r}catch(r){console.error("Failed to load assignments:",r),m.value="Failed to load workouts. Please try again."}finally{a.value=!1}}}async function j(){if(!(!v.user?.id||!x.value))try{const r=await S.fetchUpcomingAssignments(v.user.id);p.value=r}catch(r){console.error("Failed to load upcoming assignments:",r)}}async function V(){if(v.user?.id)try{const r=await S.getAssignmentStats(v.user.id);i.value=r}catch(r){console.error("Failed to load stats:",r)}}function N(){const r=new Date(u.value+"T00:00:00");r.setDate(r.getDate()-1),u.value=r.toISOString().split("T")[0]}function O(){const r=new Date(u.value+"T00:00:00");r.setDate(r.getDate()+1),u.value=r.toISOString().split("T")[0]}function F(){u.value=new Date().toISOString().split("T")[0]}function U(r){g.value=r,d.value=!0}function L(){d.value=!1,g.value=null}function T(r){w.push(`/athlete/workout/${r.id}`)}return K(u,()=>{D(),x.value?j():p.value=[]}),B(()=>{D(),j(),V()}),(r,l)=>(o(),n("div",Xt,[t("div",Yt,[t("div",Zt,[t("div",te,[t("h1",ee,s(E.value)+", "+s(J(v).profile?.display_name?.split(" ")[0]||"Athlete")+"! ",1),l[2]||(l[2]=t("p",{class:"text-gray-600 mt-1"},"Ready to crush today's workouts?",-1))]),i.value?(o(),n("div",se,[t("div",oe,[l[3]||(l[3]=t("p",{class:"text-sm text-summit-600 font-medium"},"This Week",-1)),t("p",ne,s(i.value.thisWeek),1)]),t("div",ae,[l[4]||(l[4]=t("p",{class:"text-sm text-green-600 font-medium"},"Completed",-1)),t("p",ie,s(i.value.completed),1)]),t("div",re,[l[5]||(l[5]=t("p",{class:"text-sm text-valencia-600 font-medium"},"Completion Rate",-1)),t("p",le,s(i.value.completionRate)+"%",1)])])):c("",!0),t("div",de,[t("button",{onClick:N,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors"},[...l[6]||(l[6]=[t("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),Q(t("input",{"onUpdate:modelValue":l[0]||(l[0]=h=>u.value=h),type:"date",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-summit-500"},null,512),[[X,u.value]]),t("button",{onClick:O,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors"},[...l[7]||(l[7]=[t("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),x.value?c("",!0):(o(),n("button",{key:0,onClick:F,class:"px-4 py-2 bg-summit-600 text-white rounded-lg font-medium hover:bg-summit-700 transition-colors"}," Today "))]),t("p",ue,s(C.value),1)])]),t("div",ce,[a.value?(o(),n("div",me,[...l[8]||(l[8]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-summit-600"},null,-1)])])):m.value?(o(),n("div",ge,[l[9]||(l[9]=t("svg",{class:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",he,s(m.value),1),t("button",{onClick:D,class:"px-4 py-2 bg-summit-600 text-white rounded-lg font-medium hover:bg-summit-700 transition-colors"}," Try Again ")])):f.value.length===0?(o(),n("div",xe,[l[10]||(l[10]=t("svg",{class:"w-20 h-20 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),l[11]||(l[11]=t("h3",{class:"text-xl font-semibold text-gray-700 mb-2"},"No Workouts Scheduled",-1)),t("p",ve,s(x.value?"Enjoy your rest day!":"No workouts assigned for this date."),1)])):(o(),n("div",pe,[t("h2",fe,s(x.value?"Today's Workouts":"Scheduled Workouts"),1),t("div",ye,[(o(!0),n(_,null,$(f.value,h=>(o(),W(wt,{key:h.id,assignment:h,onViewDetails:P=>U(h),onStartWorkout:P=>T(h)},null,8,["assignment","onViewDetails","onStartWorkout"]))),128))])])),x.value&&p.value.length>0?(o(),n("div",ke,[l[12]||(l[12]=t("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Coming Up",-1)),t("div",be,[(o(!0),n(_,null,$(p.value,h=>(o(),n("div",{key:h.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-5"},[t("div",we,[t("p",_e,s(new Date(h.assigned_date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})),1),h.workout?.workout_type?(o(),n("span",$e,s(h.workout.workout_type),1)):c("",!0)]),t("h3",Ce,s(h.workout?.name),1),t("div",De,[h.coach?.avatar_url?(o(),n("img",{key:0,src:h.coach.avatar_url,alt:h.coach.display_name,class:"w-6 h-6 rounded-full object-cover"},null,8,Se)):c("",!0),t("span",Me,s(h.coach?.display_name),1)])]))),128))])])):c("",!0)]),A(Qt,{"is-open":d.value,assignment:g.value,onClose:L,onStartWorkout:l[1]||(l[1]=h=>T(g.value))},null,8,["is-open","assignment"])]))}});export{Be as default};
