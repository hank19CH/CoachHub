import{d as C,o as i,c as r,g as c,p as F,a as l,t as m,b as p,F as B,n as j,r as v,q as I}from"./index-CR_8Ibs2.js";const L={class:"text-sm text-gray-600 font-medium"},S={class:"text-xs text-gray-400 mt-1"},V={key:1,class:"text-sm text-red-600 mt-2"},_={key:2,class:"mt-3 flex gap-2 overflow-x-auto pb-2"},$=["src"],D={key:1,class:"w-full h-full flex items-center justify-center bg-gray-800"},U={class:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-[10px] text-center py-0.5"},A=["onClick"],T=C({__name:"MediaUploadZone",props:{maxFiles:{default:10},maxImageSize:{default:10*1024*1024},maxVideoSize:{default:50*1024*1024}},emits:["filesChanged"],setup(g,{emit:k}){const n=g,h=k,o=v([]),d=v([]),f=v(!1),s=v(""),b=I(()=>o.value.length<n.maxFiles);function w(t){f.value=!1,t.dataTransfer?.files&&x(Array.from(t.dataTransfer.files))}function y(t){const e=t.target;e.files&&(x(Array.from(e.files)),e.value="")}function x(t){s.value="";for(const e of t){if(o.value.length>=n.maxFiles){s.value=`Maximum ${n.maxFiles} files allowed`;break}const a=e.type.startsWith("image/"),u=e.type.startsWith("video/");if(!a&&!u){s.value="Only images and videos are allowed";continue}if(a&&e.size>n.maxImageSize){s.value=`Images must be under ${Math.round(n.maxImageSize/1024/1024)}MB`;continue}if(u&&e.size>n.maxVideoSize){s.value=`Videos must be under ${Math.round(n.maxVideoSize/1024/1024)}MB`;continue}o.value.push(e),d.value.push({url:URL.createObjectURL(e),type:a?"image":"video"})}h("filesChanged",[...o.value])}function M(t){URL.revokeObjectURL(d.value[t]?.url??""),o.value.splice(t,1),d.value.splice(t,1),s.value="",h("filesChanged",[...o.value])}function z(t){return t<1024?t+"B":t<1024*1024?(t/1024).toFixed(1)+"KB":(t/1024/1024).toFixed(1)+"MB"}return(t,e)=>(i(),r("div",null,[b.value?(i(),r("div",{key:0,class:F(["border-2 border-dashed rounded-xl p-6 text-center transition-colors cursor-pointer",f.value?"border-summit-500 bg-summit-50":"border-gray-300 hover:border-gray-400"]),onDragover:e[0]||(e[0]=c(a=>f.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=a=>f.value=!1),onDrop:c(w,["prevent"]),onClick:e[2]||(e[2]=a=>t.$refs.fileInput.click())},[l("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",class:"hidden",onChange:y},null,544),e[3]||(e[3]=l("svg",{class:"w-10 h-10 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),l("p",L,m(f.value?"Drop files here":"Tap to add photos or videos"),1),l("p",S,m(o.value.length)+"/"+m(g.maxFiles)+" files ",1)],34)):p("",!0),s.value?(i(),r("p",V,m(s.value),1)):p("",!0),d.value.length>0?(i(),r("div",_,[(i(!0),r(B,null,j(d.value,(a,u)=>(i(),r("div",{key:u,class:"relative flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100"},[a.type==="image"?(i(),r("img",{key:0,src:a.url,class:"w-full h-full object-cover"},null,8,$)):(i(),r("div",D,[...e[4]||(e[4]=[l("svg",{class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)])])),l("div",U,m(z(o.value[u]?.size??0)),1),l("button",{onClick:c(O=>M(u),["stop"]),class:"absolute top-0.5 right-0.5 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center hover:bg-black/80"},[...e[5]||(e[5]=[l("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,A)]))),128))])):p("",!0)]))}});export{T as _};
