import{d as T,u as F,m as I,c as o,F as M,a as t,n as L,f as a,h as D,i as E,t as g,b as _,w,v as S,e as j,p as R,g as $,l as J,r as n,q as B,j as Q,o as l,k as Y}from"./index-DoIKaNgo.js";import{a as Z}from"./athletes-Bm142xSv.js";const G={class:"bg-white rounded-2xl shadow-elevated p-6 animate-fade-in"},K={class:"space-y-3"},O=["onClick"],W={class:"flex items-start gap-4"},X={class:"w-12 h-12 rounded-xl bg-summit-100 flex items-center justify-center flex-shrink-0 group-hover:bg-summit-200 transition-colors"},ee={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-summit-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},te={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-summit-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},se={key:2,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-summit-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},oe={class:"flex-1"},le={class:"font-semibold text-gray-900 group-hover:text-summit-800"},ne={class:"text-sm text-gray-600 mt-0.5"},re={class:"text-center text-gray-600 mt-6"},ae={class:"text-gray-600 mb-6"},ie={class:"font-semibold text-summit-700"},ue={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"},de={class:"helper-text"},pe={class:"relative"},me=["type"],ve={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ce={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ge=["type"],we={key:0,class:"error-text"},he=["disabled"],xe={key:0,class:"flex items-center gap-2"},ye={key:1},Me=T({__name:"SignupView",setup(fe){const k=Y(),z=J(),b=F(),h=n(1),d=n(null),p=n(null),x=n(""),i=n(""),m=n(""),y=n(""),u=n(""),v=n(!1),f=n(!1),c=n(""),P=[{type:"coach",title:"Coach",description:"Create programs, manage athletes, and share your coaching journey",icon:"clipboard"},{type:"athlete",title:"Athlete",description:"Train with coaches, track progress, and share your achievements",icon:"lightning"},{type:"follower",title:"Follower",description:"Follow athletes and coaches, engage with their journey",icon:"users"}],A=B(()=>u.value?"@"+u.value.toLowerCase().replace(/[^a-z0-9_]/g,""):"@username"),C=B(()=>i.value===m.value),V=B(()=>x.value&&i.value&&i.value.length>=8&&C.value&&y.value&&u.value.length>=3);I(()=>{const r=sessionStorage.getItem("pending_invite_code");r&&(p.value=r);const e=z.query.invite;e&&e!=="true"&&!p.value&&(p.value=e),e&&(d.value="athlete",h.value=2)});function N(r){d.value=r,h.value=2}function U(){h.value=1,c.value=""}async function q(){if(!V.value||!d.value)return;f.value=!0,c.value="";const r=await b.signUp(x.value,i.value,d.value,y.value,u.value);if(r.success)if(p.value&&b.profile?.id)try{await Z(p.value,b.profile.id),sessionStorage.removeItem("pending_invite_code"),k.push("/athlete/hub")}catch(e){console.error("Error accepting invitation after signup:",e),sessionStorage.removeItem("pending_invite_code"),k.push("/")}else k.push("/");else c.value=r.error||"Signup failed";f.value=!1}return(r,e)=>{const H=Q("router-link");return l(),o("div",G,[h.value===1?(l(),o(M,{key:0},[e[12]||(e[12]=t("h2",{class:"font-display text-2xl font-bold text-gray-900 mb-2 text-center"}," Join CoachHub ",-1)),e[13]||(e[13]=t("p",{class:"text-gray-600 text-center mb-6"}," How do you want to use CoachHub? ",-1)),t("div",K,[(l(),o(M,null,L(P,s=>t("button",{key:s.type,onClick:ke=>N(s.type),class:"w-full p-4 rounded-xl border-2 border-gray-200 hover:border-summit-500 hover:bg-summit-50 transition-all text-left group"},[t("div",W,[t("div",X,[s.icon==="clipboard"?(l(),o("svg",ee,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)])])):s.icon==="lightning"?(l(),o("svg",te,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])):s.icon==="users"?(l(),o("svg",se,[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])])):_("",!0)]),t("div",oe,[t("h3",le,g(s.title),1),t("p",ne,g(s.description),1)]),e[9]||(e[9]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-400 group-hover:text-summit-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1))])],8,O)),64))]),t("p",re,[e[11]||(e[11]=a(" Already have an account? ",-1)),D(H,{to:"/login",class:"text-summit-700 hover:text-summit-800 font-semibold"},{default:E(()=>[...e[10]||(e[10]=[a(" Sign in ",-1)])]),_:1})])],64)):(l(),o(M,{key:1},[t("button",{onClick:U,class:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-4 -ml-1"},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1),t("span",{class:"text-sm font-medium"},"Back",-1)])]),e[26]||(e[26]=t("h2",{class:"font-display text-2xl font-bold text-gray-900 mb-1"}," Create your account ",-1)),t("p",ae,[e[15]||(e[15]=a(" Signing up as ",-1)),t("span",ie,g(d.value),1)]),t("form",{onSubmit:$(q,["prevent"]),class:"space-y-4"},[c.value?(l(),o("div",ue,g(c.value),1)):_("",!0),t("div",null,[e[16]||(e[16]=t("label",{for:"displayName",class:"label"},"Full Name",-1)),w(t("input",{id:"displayName","onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),type:"text",class:"input",placeholder:"Your full name",required:""},null,512),[[S,y.value]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"username",class:"label"},"Username",-1)),w(t("input",{id:"username","onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),type:"text",class:"input",placeholder:"your_username",pattern:"[a-zA-Z0-9_]+",minlength:"3",required:""},null,512),[[S,u.value]]),t("p",de,g(A.value),1)]),t("div",null,[e[18]||(e[18]=t("label",{for:"email",class:"label"},"Email",-1)),w(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=s=>x.value=s),type:"email",class:"input",placeholder:"you@example.com",autocomplete:"email",required:""},null,512),[[S,x.value]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"password",class:"label"},"Password",-1)),t("div",pe,[w(t("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),type:v.value?"text":"password",class:"input pr-12",placeholder:"••••••••",minlength:"8",autocomplete:"new-password",required:""},null,8,me),[[j,i.value]]),t("button",{type:"button",onClick:e[4]||(e[4]=s=>v.value=!v.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"},[v.value?(l(),o("svg",ve,[...e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(l(),o("svg",ce,[...e[20]||(e[20]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),e[22]||(e[22]=t("p",{class:"helper-text"},"Minimum 8 characters",-1))]),t("div",null,[e[23]||(e[23]=t("label",{for:"confirmPassword",class:"label"},"Confirm Password",-1)),w(t("input",{id:"confirmPassword","onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),type:v.value?"text":"password",class:R(["input",{"input-error":m.value&&!C.value}]),placeholder:"••••••••",required:""},null,10,ge),[[j,m.value]]),m.value&&!C.value?(l(),o("p",we," Passwords don't match ")):_("",!0)]),t("button",{type:"submit",class:"btn-primary w-full",disabled:!V.value||f.value},[f.value?(l(),o("span",xe,[...e[24]||(e[24]=[t("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a(" Creating account... ",-1)])])):(l(),o("span",ye,"Create Account"))],8,he),e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 text-center"},[a(" By signing up, you agree to our "),t("a",{href:"#",class:"text-summit-700 hover:underline"},"Terms of Service"),a(" and "),t("a",{href:"#",class:"text-summit-700 hover:underline"},"Privacy Policy"),a(". ")],-1))],32)],64))])}}});export{Me as default};
