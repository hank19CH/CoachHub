import{d as y,u as h,c as s,a as t,t as b,b as k,w as f,v as C,e as S,f as g,g as _,h as M,i as V,r as a,j as B,o,k as I,l as j}from"./index-CR_8Ibs2.js";import{a as z}from"./athletes-CyaJPgAV.js";const A={class:"bg-white rounded-2xl shadow-elevated p-6 animate-fade-in"},D={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"},N={class:"relative"},q=["type"],E={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},P={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},L=["disabled"],R={key:0,class:"flex items-center gap-2"},T={key:1},U={class:"text-center text-gray-600"},$=y({__name:"LoginView",setup(F){const m=I(),w=j(),c=h(),n=a(""),i=a(""),u=a(!1),d=a(!1),l=a("");async function x(){if(!n.value||!i.value){l.value="Please fill in all fields";return}d.value=!0,l.value="";const v=await c.signIn(n.value,i.value);if(v.success){const e=sessionStorage.getItem("pending_invite_code");if(e&&c.profile?.user_type==="athlete")try{await z(e,c.profile.id),sessionStorage.removeItem("pending_invite_code"),m.push("/athlete/hub")}catch(r){console.error("Error accepting invitation after login:",r),sessionStorage.removeItem("pending_invite_code"),m.push("/")}else{const r=w.query.redirect;m.push(r||"/")}}else l.value=v.error||"Sign in failed";d.value=!1}return(v,e)=>{const r=B("router-link");return o(),s("div",A,[e[11]||(e[11]=t("h2",{class:"font-display text-2xl font-bold text-gray-900 mb-6 text-center"}," Welcome back ",-1)),t("form",{onSubmit:_(x,["prevent"]),class:"space-y-4"},[l.value?(o(),s("div",D,b(l.value),1)):k("",!0),t("div",null,[e[3]||(e[3]=t("label",{for:"email",class:"label"},"Email",-1)),f(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=p=>n.value=p),type:"email",class:"input",placeholder:"you@example.com",autocomplete:"email",required:""},null,512),[[C,n.value]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"password",class:"label"},"Password",-1)),t("div",N,[f(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=p=>i.value=p),type:u.value?"text":"password",class:"input pr-12",placeholder:"••••••••",autocomplete:"current-password",required:""},null,8,q),[[S,i.value]]),t("button",{type:"button",onClick:e[2]||(e[2]=p=>u.value=!u.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"},[u.value?(o(),s("svg",E,[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(o(),s("svg",P,[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),e[8]||(e[8]=t("div",{class:"text-right"},[t("a",{href:"#",class:"text-sm text-summit-700 hover:text-summit-800 font-medium"}," Forgot password? ")],-1)),t("button",{type:"submit",class:"btn-primary w-full",disabled:d.value},[d.value?(o(),s("span",R,[...e[7]||(e[7]=[t("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Signing in... ",-1)])])):(o(),s("span",T,"Sign In"))],8,L)],32),e[12]||(e[12]=t("div",{class:"flex items-center gap-4 my-6"},[t("div",{class:"flex-1 h-px bg-gray-200"}),t("span",{class:"text-gray-500 text-sm"},"or"),t("div",{class:"flex-1 h-px bg-gray-200"})],-1)),t("p",U,[e[10]||(e[10]=g(" Don't have an account? ",-1)),M(r,{to:"/signup",class:"text-summit-700 hover:text-summit-800 font-semibold"},{default:V(()=>[...e[9]||(e[9]=[g(" Sign up ",-1)])]),_:1})])])}}});export{$ as default};
